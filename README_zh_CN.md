# ä¸€ä¸ªMCPæœåŠ¡ç«¯æ’ä»¶

> ä¸º[æ€æºç¬”è®°](https://github.com/siyuan-note/siyuan)æä¾›MCPæœåŠ¡çš„æ’ä»¶ã€‚

> å½“å‰ç‰ˆæœ¬: v1.0.0-alpha
>
> æ–°å¢ï¼šMCPè¿æ¥ã€å·¥å…·è°ƒç”¨æ—¥å¿—ï¼›
>
> å…¶ä»–è¯¦è§[æ›´æ–°æ—¥å¿—](./CHANGELOG.md)ã€‚

## âœ¨å¿«é€Ÿå¼€å§‹

- ä»é›†å¸‚ä¸‹è½½ æˆ– 1ã€è§£å‹Releaseä¸­çš„`package.zip`ï¼Œ2ã€å°†æ–‡ä»¶å¤¹ç§»åŠ¨åˆ°`å·¥ä½œç©ºé—´/data/plugins/`ï¼Œ3ã€å¹¶å°†æ–‡ä»¶å¤¹é‡å‘½åä¸º`syplugin-anMCPServer`;
- å¼€å¯æ’ä»¶ï¼›
- æ‰“å¼€æ’ä»¶è®¾ç½®ï¼Œå¯åŠ¨æœåŠ¡ï¼›
- æ’ä»¶é»˜è®¤ç›‘å¬`16806`ç«¯å£ï¼ˆHost: `127.0.0.1`ï¼‰ï¼Œè¯·ä½¿ç”¨`http://127.0.0.1:16806/mcp`ä½œä¸ºæœåŠ¡ç«¯è®¿é—®åœ°å€ï¼›

> â­ å¦‚æœè¿™å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ç‚¹äº®Starï¼

## ğŸ”§æ”¯æŒçš„å·¥å…·

| åˆ†ç±»        | åŠŸèƒ½é¡¹                       | æ’é™¤æ–‡æ¡£ | çŠ¶æ€/è¯´æ˜                                       |
| ------------- | ------------------------------ | ---------- | ------------------------------------------------- |
| æ£€ç´¢        | ä½¿ç”¨å…³é”®è¯æœç´¢               | N/A      | âš ï¸ æš‚æ—¶ç§»é™¤ï¼Œå¦‚æœ‰éœ€è¦è¯·åé¦ˆ                   |
| æ£€ç´¢        | ä½¿ç”¨ SQL æœç´¢                | âš ï¸     | æ’é™¤æ–‡æ¡£ä»…åœ¨ï¼šè¿”å›å€¼å« ID ä¸”æ¡ç›®æ•° < 300 æ—¶æ£€æŸ¥ |
| æ£€ç´¢        | ç¬”è®°ç´¢å¼•åº“é—®ç­” (RAG)         | -        | ğŸš« å³å°†ç§»é™¤ï¼Œåç»­å°†é‡‡ç”¨æ–°æ–¹æ¡ˆ                   |
| è·å–        | é€šè¿‡ ID è·å–æ–‡æ¡£ Markdown    | âœ…       | â€”                                              |
| è·å–        | é€šè¿‡ ID è·å–å— Kramdown      | âœ…       | â€”                                              |
| è·å–        | åˆ—å‡ºç¬”è®°æœ¬                   | âŒ       | â€”                                              |
| è·å–        | é€šè¿‡ ID è·å–åå‘é“¾æ¥         | âœ…       | â€”                                              |
| è·å–        | è·å–æ–‡æ¡£çš„å­æ–‡æ¡£åˆ—è¡¨         | âœ…       | â€”                                              |
| è·å–        | è·å–å­å—åˆ—è¡¨                 | âœ…       | â€”                                              |
| è·å–        | è¯»å–å±æ€§                     | âœ…       | â€”                                              |
| è·å–        | è¯»å–æŒ‡å®šæ—¥æœŸæ—¥è®°             | -        | ğŸš«æš‚æ—¶ç§»é™¤ï¼Œå¦‚æœ‰éœ€è¦è¯·åé¦ˆ                      |
| è·å–        | æ€æºç¬”è®°æ•°æ®åº“æ ¼å¼           | -        | â€”                                              |
| å†™å…¥ / æ–‡æ¡£ | å‘æ—¥è®°è¿½åŠ å†…å®¹               | âœ…       | â€”                                              |
| å†™å…¥ / æ–‡æ¡£ | é€šè¿‡ ID å‘æŒ‡å®šæ–‡æ¡£è¿½åŠ å†…å®¹   | âœ…       | â€”                                              |
| å†™å…¥ / æ–‡æ¡£ | é€šè¿‡ ID åœ¨æŒ‡å®šä½ç½®åˆ›å»ºæ–°æ–‡æ¡£ | âœ…       | â€”                                              |
| å†™å…¥ / æ–‡æ¡£ | æ’å…¥å­å—ï¼ˆå‰ç½®/åç½®ï¼‰        | âœ…       | â€”                                              |
| å†™å…¥ / æ–‡æ¡£ | æ’å…¥å—ï¼ˆæŒ‡å®šä½ç½®ï¼‰           | âœ…       | â€”                                              |
| å†™å…¥ / æ–‡æ¡£ | æ›´æ–°å—                       | âœ…       | â€”                                              |
| å†™å…¥ / é—ªå¡ | é€šè¿‡ Markdown å†…å®¹åˆ›å»ºé—ªå¡   | âœ…       | â€”                                              |
| å†™å…¥ / é—ªå¡ | é€šè¿‡å— ID åˆ›å»ºé—ªå¡           | âœ…       | â€”                                              |
| å†™å…¥ / é—ªå¡ | é€šè¿‡å— ID åˆ é™¤é—ªå¡           | âŒ       | â€”                                              |
| å†™å…¥ / å±æ€§ | æ›´æ”¹å±æ€§ï¼ˆå¢/åˆ /æ”¹ï¼‰         | âœ…       | â€”                                              |
| å†™å…¥ / ç§»åŠ¨ | ç§»åŠ¨æ–‡æ¡£                     | âœ…       | â€”                                              |
| å†™å…¥ / ç§»åŠ¨ | ç§»åŠ¨å—                       | âœ…       | âš ï¸ ç§»åŠ¨æ ‡é¢˜éœ€æŠ˜å ç§»åŠ¨ï¼Œä¼šå¯¼è‡´æŠ˜å çŠ¶æ€ä¸¢å¤±     |


## â“å¯èƒ½å¸¸è§çš„é—®é¢˜

- Q: å¦‚ä½•åœ¨MCPå®¢æˆ·ç«¯ä¸­ä½¿ç”¨ï¼Ÿ
  è¯·å‚è€ƒåæ–‡ï¼›
- Q: å¸¸è§çš„MCPå®¢æˆ·ç«¯æœ‰å“ªäº›ï¼Ÿ
  - è¯·å‚è€ƒï¼šhttps://github.com/punkpeye/awesome-mcp-clients æˆ– https://modelcontextprotocol.io/clients ï¼›
- Qï¼šæ’ä»¶æ”¯æŒé‰´æƒå—ï¼Ÿ
  - v0.2.0ç‰ˆæœ¬å·²æ”¯æŒé‰´æƒï¼Œåœ¨æ’ä»¶è®¾ç½®å¤„è®¾ç½®é‰´æƒtokenåï¼Œåœ¨MCPå®¢æˆ·ç«¯ï¼Œéœ€è¦è®¾ç½®`authorization`è¯·æ±‚å¤´ï¼Œå…¶å€¼ä¸º `Bearer ä½ çš„Token`ï¼›
- Q: å¯ä»¥åœ¨dockerä½¿ç”¨å—ï¼Ÿ
  - ä¸å¯ä»¥ï¼Œæ’ä»¶ä¾èµ–nodejsç¯å¢ƒï¼Œä¸æ”¯æŒåœ¨ç§»åŠ¨ç«¯ã€dockerè¿è¡Œï¼›
  
    > è‹¥è¦æ”¯æŒdockerä¸­éƒ¨ç½²çš„æ€æºï¼Œå»ºè®®è½¬ä¸ºä½¿ç”¨å…¶ä»–MCPé¡¹ç›®ï¼Œéƒ¨åˆ†é¡¹ç›®å¯èƒ½åœ¨[è¿™é‡Œ](https://github.com/siyuan-note/siyuan/issues/13795)åˆ—å‡ºï¼›
    > 
    > æˆ–è€…ï¼Œä¿®æ”¹ä»£ç ï¼Œå°†æœ¬æ’ä»¶å’Œæ€æºå‰ç«¯è§£è€¦ï¼›
- Q: å¦‚ä½•æŸ¥çœ‹å·²ç»è®¾ç½®çš„æˆæƒç ï¼Ÿ
  - æˆæƒç å“ˆå¸Œåä¿å­˜ï¼Œåªèƒ½ä¿®æ”¹ï¼Œä¸èƒ½æŸ¥çœ‹ç”Ÿæ•ˆä¸­çš„æˆæƒç ï¼›
- Q: æˆ‘åªè¿æ¥äº†ä¸€æ¬¡ï¼Œä¸ºä½•è®¾ç½®é¡µä¸­æ˜¾ç¤ºè¿æ¥æ•°çš„è¿æ¥æ•°å¤§äº1ï¼Ÿ
  - ç»Ÿè®¡æ›´æ–°ä¸åŠæ—¶ï¼šè¯·æ‰‹åŠ¨ç‚¹å‡»åˆ·æ–°çŠ¶æ€è·å–æœ€æ–°ç»“æœï¼›
  - æœªå®Œå…¨é‡Šæ”¾è¿æ¥ï¼šéƒ¨åˆ† MCP å®¢æˆ·ç«¯åœ¨å…³é—­æ—¶æœªå‘é€æ ‡å‡†çš„æ–­å¼€ä¿¡å·ï¼Œå¯¼è‡´æ—§è¿æ¥ä»åœ¨åå°å ç”¨ã€‚é‡æ–°å¼€å¯åŠŸèƒ½æ—¶ï¼Œç³»ç»Ÿä¼šå»ºç«‹æ–°çš„è¿æ¥å åŠ ï¼›
  - å¤šç«¯è¿æ¥ï¼šè¯·ç¡®è®¤æ˜¯å¦æœ‰å…¶ä»–è½¯ä»¶æ­£åœ¨è®¿é—®mcpæœåŠ¡æˆ–ç›¸å…³ç«¯å£ï¼›
  - ä»æœ‰é—®é¢˜ï¼Ÿè¯·æŸ¥çœ‹æ’ä»¶æ—¥å¿—ï¼Œæˆ–è®¾ç½®æˆæƒç é¿å…ä¿¡æ¯æ³„éœ²ï¼›
- Qï¼šä»€ä¹ˆæ˜¯â€œç¬”è®°ç´¢å¼•åº“é—®ç­”ï¼ˆä½¿ç”¨RAGåç«¯æœåŠ¡ï¼‰â€å·¥å…·ï¼Ÿ
  - â€œç¬”è®°ç´¢å¼•åº“é—®ç­”â€æ˜¯ä¸€ç§åŸºäº RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯çš„é—®ç­”å·¥å…·ã€‚è¯¥å·¥å…·å…è®¸è¯­è¨€æ¨¡å‹åœ¨å›ç­”é—®é¢˜æ—¶ï¼Œå¼•ç”¨å·²è¢«ç´¢å¼•çš„ç¬”è®°å†…å®¹ï¼Œç¡®ä¿ç”Ÿæˆçš„å›ç­”æ›´åŠ å‡†ç¡®ï¼›
  - å‚è€ƒ[RAG_BETAæ–‡æ¡£](./RAG_BETA.md)æ­£ç¡®éƒ¨ç½²å¹¶åœ¨æ’ä»¶è®¾ç½® â€œæ’ä»¶RAGåç«¯ï¼šè¯·æ±‚baseURLâ€ ä¹‹åï¼Œå¯ä»¥åœ¨æ–‡æ¡£æ ‘å³é”®-æ’ä»¶é€‰æ‹©ç´¢å¼•æ–‡æ¡£ï¼Œæ–‡æ¡£å°†å‘é€åˆ° RAGåç«¯ è¿›è¡Œç´¢å¼•ï¼ˆç›®å‰çš„å®ç°ä½¿ç”¨å¯¹ [LightRAG](https://github.com/HKUDS/LightRAG) ç®€å•åŒ…è£…çš„pythonåç«¯ï¼‰ï¼›
  - è¯­è¨€æ¨¡å‹åœ¨ç”¨æˆ·æé—®æ—¶ï¼Œå¯ä»¥è°ƒç”¨è¯¥å·¥å…·ï¼Œè·å–åŸºäº LightRAG çŸ¥è¯†å›¾è°±ç»™å‡ºçš„å›ç­”ï¼›
  - æ³¨æ„ï¼šå›ç­”ä»…åŸºäºå·²è¢«ç´¢å¼•çš„æ–‡æ¡£ï¼Œä¸ä¼šä½¿ç”¨æœªè¢«ç´¢å¼•çš„æ–‡æ¡£å†…å®¹ã€‚

## âœ…å¦‚ä½•åœ¨MCPå®¢æˆ·ç«¯ä¸­é…ç½®ï¼Ÿ

> MCPå®¢æˆ·ç«¯ä¸æ–­è¿­ä»£æ›´æ–°ï¼Œè¿™é‡Œçš„é…ç½®æˆ–ä½¿ç”¨è¯´æ˜æœªå¿…èƒ½å¤Ÿç›´æ¥å¥—ç”¨ï¼Œä»…ä¾›å‚è€ƒï¼›
>
> è¿™é‡Œå‡è®¾ï¼šæ’ä»¶è®¾ç½®çš„ç«¯å£å·ä¸º `16806`ï¼Œæˆæƒç ä¸º `abcdefg`ï¼Œè¯·ä»¥å®é™…å¡«å†™çš„æ’ä»¶è®¾ç½®ä¸ºå‡†ã€‚

ä¿®æ”¹MCPåº”ç”¨çš„é…ç½®ï¼Œé€‰æ‹©`Streamable HTTP`ç±»å‹ï¼Œå¹¶é…ç½®ç«¯ç‚¹ã€‚

### æ”¯æŒStreamable HTTPç±»å‹çš„å®¢æˆ·ç«¯

ä¸‹é¢çš„é…ç½®ä»¥ [Cherry Studio](https://github.com/CherryHQ/cherry-studio) ä¸ºä¾‹ï¼Œé’ˆå¯¹ä¸åŒçš„MCPå®¢æˆ·ç«¯ï¼Œå¯èƒ½éœ€è¦ä¸åŒçš„é…ç½®æ ¼å¼ï¼Œè¯·ä»¥MCPå®¢æˆ·ç«¯æ–‡æ¡£ä¸ºå‡†ã€‚

**æ’ä»¶æœªè®¾ç½®æˆæƒç **

1. ç±»å‹ï¼šé€‰æ‹© å¯æµå¼ä¼ è¾“çš„HTTPï¼ˆstreamablehttpï¼‰ï¼›
2. URLï¼š`http://127.0.0.1:16806/mcp`ï¼›
3. è¯·æ±‚å¤´ï¼šç©ºï¼›

**æ’ä»¶å·²è®¾ç½®æˆæƒç **

1. ç±»å‹ï¼šé€‰æ‹© å¯æµå¼ä¼ è¾“çš„HTTPï¼ˆstreamablehttpï¼‰ï¼›
2. URLï¼š`http://127.0.0.1:16806/mcp`ï¼›
3. è¯·æ±‚å¤´ï¼š`Authorization=Bearer abcdefg`ï¼›

> è¿™é‡Œå‡è®¾ï¼šæ’ä»¶è®¾ç½®çš„ç«¯å£å·ä¸º `16806`ï¼Œæˆæƒç ä¸º `abcdefg`ï¼Œè¯·ä»¥å®é™…å¡«å†™çš„æ’ä»¶è®¾ç½®ä¸ºå‡†ã€‚

### ä»…æ”¯æŒstdioçš„å®¢æˆ·ç«¯

è‹¥MCPå®¢æˆ·ç«¯ä¸æ”¯æŒåŸºäºHTTPçš„é€šä¿¡æ–¹å¼ï¼Œä»…æ”¯æŒstdioï¼Œåˆ™éœ€è¦é€šè¿‡è½¬æ¢åä½¿ç”¨ã€‚

è¿™é‡Œä½¿ç”¨`node.js` + `mcp-remote@next`çš„æ–¹æ¡ˆã€‚

1. ä¸‹è½½nodejs https://nodejs.org/zh-cn/download

2. å®‰è£…mcp-remote@next
  ```bash
  npm install -g mcp-remote@next
  ```

ä¸‹é¢çš„é…ç½®ä»¥ [5ire](https://5ire.app/) ä¸ºä¾‹ï¼Œé’ˆå¯¹ä¸åŒçš„MCPå®¢æˆ·ç«¯ï¼Œå¯èƒ½éœ€è¦ä¸åŒçš„é…ç½®æ ¼å¼ï¼Œè¯·ä»¥MCPå®¢æˆ·ç«¯æ–‡æ¡£ä¸ºå‡†ã€‚

**æ’ä»¶æœªè®¾ç½®æˆæƒç **

å‘½ä»¤ï¼š

```
npx mcp-remote@next http://127.0.0.1:16806/mcp
```

**æ’ä»¶å·²è®¾ç½®æˆæƒç **

å‘½ä»¤ï¼š
```
npx mcp-remote@next http://127.0.0.1:16806/mcp --header Authorization:${AUTH_HEADER}
```

ç¯å¢ƒå˜é‡ï¼š

åç§°ï¼š`AUTH_HEADER`
å€¼ï¼š`Bearer abcdefg`

> è¿™é‡Œå‡è®¾ï¼šæ’ä»¶è®¾ç½®çš„ç«¯å£å·ä¸º `16806`ï¼Œæˆæƒç ä¸º `abcdefg`ï¼Œè¯·ä»¥å®é™…å¡«å†™çš„æ’ä»¶è®¾ç½®ä¸ºå‡†ã€‚

## ğŸ™å‚è€ƒ&æ„Ÿè°¢

> éƒ¨åˆ†ä¾èµ–é¡¹åœ¨`package.json`ä¸­åˆ—å‡ºã€‚

| å¼€å‘è€…/é¡¹ç›®                                                         | é¡¹ç›®æè¿°           | å¼•ç”¨æ–¹å¼         |
|---------------------------------------------------------------------|----------------|--------------|
| [thuanpham582002/tabby-mcp-server](https://github.com/thuanpham582002/tabby-mcp-server) | åœ¨ç»ˆç«¯è½¯ä»¶Tabbyä¸­æä¾›MCPæœåŠ¡ï¼› MIT License | MCPæœåŠ¡å®ç°æ–¹å¼ |
| [wilsons](https://ld246.com/article/1756172573626/comment/1756384424179?r=wilsons#comments) / [Frostime](https://ld246.com/article/1739546865001#%E6%80%9D%E6%BA%90-SQL-%E6%9F%A5%E8%AF%A2-System-Prompt) | æç¤ºè¯/ç³»ç»Ÿæç¤ºè¯ CC BY-SA 4.0 | ç³»ç»Ÿæç¤ºè¯ç­‰ï¼Œä½äºé¡¹ç›®çš„`static/`ç›®å½• |
